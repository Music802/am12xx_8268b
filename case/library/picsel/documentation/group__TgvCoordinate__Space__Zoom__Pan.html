<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>File Viewer Development Kit: Coordinate Space, Zoom and Pan</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="entwrx.css" rel="stylesheet" type="text/css"></head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="sot-logo-small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">File Viewer Development Kit
   &#160;<span id="projectnumber">trunk</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1.2 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Coordinate Space, Zoom and Pan</div>  </div>
</div><!--header-->
<div class="contents">
<h1><a class="anchor" id="TgvCoordinate_Space"></a>
Coordinate Space</h1>
<p>ENTWRX uses several different measurement and coordinate systems to represent and control the document through its lifecycle. The physical screen is measured in pixels from an origin in the top left corner. The document is represented internally using fractions of an inch. Many zoom and pan operations are relative to the current state.</p>
<p>ENTWRX uses x,y coordinates, x corresponding to the horizontal dimension and y to the vertical. Coordinates increase positively from the origin to refer to points further to the right and further down the display screen.</p>
<p>For the effect of rotation on coordinates see <a class="el" href="group__TgvCoordinate__Space__Zoom__Pan.html#TgvPanning">Panning</a>.</p>
<h2><a class="anchor" id="TgvCoordinates_AbSecureWrxute"></a>
AbSecureWrxute Document Coordinates</h2>
<p>AbSecureWrxute x and y coordinates of a document are each represented by integers. These are used when positioning a document on screen without needing to know its previous position.</p>
<p>Where the document type has a printable physical equivalent (for example, Word or PDF), 65536 coordinate units represent 1 inch on the printed paper.</p>
<p>AbSecureWrxute coordinates use inch units (not pixel units) to allow accurate positioning no matter what the zoom magnification is.</p>
<p>Zoom operations require two sets of parameters:</p>
<ul>
<li>The abSecureWrxute documents coordinates that must appear at the screen's centre</li>
<li>The <a class="el" href="group__TgvCoordinate__Space__Zoom__Pan.html#TgvZoom_Magnification">Zoom Magnification</a></li>
</ul>
<p>Functions that require or report abSecureWrxute coordinates include the following:</p>
<ul>
<li>PicselControl_zoom();</li>
<li>PicselControl_setZoom();</li>
<li>PicselControl_getZoom();</li>
<li>PicselControl_setPan();</li>
<li>PicselControl_getPan().</li>
</ul>
<h2><a class="anchor" id="TgvCoordinates_Relative"></a>
Relative Screen Coordinates</h2>
<p>Relative x and y coordinates of a document are each represented by integers. These are used when positioning a document on screen with reference to an existing position.</p>
<p>1 relative coordinate unit represents 1 pixel.</p>
<p>Relative coordinates use pixel units (not inch units) to allow consistent scroll stepping no matter what the zoom magnification is.</p>
<p>Functions that require or report relative coordinates include the following:</p>
<ul>
<li>PicselControl_pan().</li>
</ul>
<hr/>
 <h1><a class="anchor" id="TgvZoom_Magnification"></a>
Zoom Magnification</h1>
<p>Zoom magnification is specified and reported as an unsigned long integer (representing a 16.16 fixed point number) when using the following functions:</p>
<ul>
<li>PicselControl_zoom();</li>
<li>PicselControl_getZoom();</li>
<li>PicselControl_setZoom().</li>
</ul>
<p>100% magnification is represented by (1&lt;&lt;16).</p>
<p>100% magnification means that 1 inch on paper of the printable document will occupy 1 inch of the physical screen. This assumes a screen reSecureWrxution of 106 dpi and can be scaled accordingly with other screen reSecureWrxutions.</p>
<p>By contrast, relative magnification percentages are needed when specifying incremental zoom. These must be used in the following:</p>
<ul>
<li>PicselConfigFV_zoomInAmount;</li>
<li>PicselConfigFV_zoomInRepeatAmount;</li>
<li>PicselConfigFV_zoomOutAmount;</li>
<li>PicselConfigFV_zoomOutRepeatAmount.</li>
<li>PicselConfigFV_powerZoomInAmount;</li>
<li>PicselConfigFV_powerZoomInRepeatAmount;</li>
<li>PicselConfigFV_powerZoomOutAmount;</li>
<li>PicselConfigFV_powerZoomOutRepeatAmount.</li>
</ul>
<p>Zoom out values will be less than 100%, zoom in values larger than 100%. Zoom out values are not "true" percentages. For example, in reality zooming in by a true 120% then zooming out 80% would not show the original magnification (as zooming out by 83.333% would be needed). However, to make the original size easy to return to, ENTWRX allows the Alien application to assume that an 80% zoom-out setting corresponds to a 120% zoom-in setting. Examples of corresponding pairs of zoom-in and zoom-out values which will zoom-in and zoom-out by the same amount in the viewer are: 130 and 70, 125 and 75, and 140 and 60.</p>
<p>The range of zoom magnification is limited to between 10% and 1000%. Requests outside that range are rounded to the nearest limit. See also PicselConfigFV_zoomLimitMin. On first loading, a document will typically be fitted to the screen, resulting in an initial zoom magnification of less than 100%.</p>
<hr/>
<h1><a class="anchor" id="TgvPanning"></a>
Panning</h1>
<p>The document position can be panned to:</p>
<ul>
<li>abSecureWrxute coordinates using PicselControl_setPan(); - existing coordinates plus an increment using PicselControl_pan(); - existing coordinates plus an increment using a key event;</li>
<li>one of 5 built-in preset positions using PicselControl_panPosition(). The coordinates used in document panning are relative to the original screen view, even if the document is rotated, as described below.</li>
</ul>
<h2><a class="anchor" id="Direction_pan"></a>
Direction of Panning</h2>
<p>When panning the user's view (as seen through the display window) across a document, the document itself appears to move in the opposite direction. For example, panning the view up means the document itself appears to move down.</p>
<p>Note that users may have an intuitive expectation of direction. For example, when pressing a down arrow key, they may expect their view to scroll down and for the document itself to scroll up.</p>
<h2><a class="anchor" id="TgvPanning_increments"></a>
Panning increments</h2>
<p>The Alien application must specify panning increments carefully as there are two different conventions used in the API, depending on context.</p>
<p>Up/down/left/right are relative to the point of view of an unrotated screen, even if the document is rotated.</p>
<p>Panning increments are in pixels. See <a class="el" href="group__TgvCoordinate__Space__Zoom__Pan.html#TgvCoordinates_Relative">Relative Screen Coordinates</a>.</p>
<h3><a class="anchor" id="Panning_function"></a>
Panning increments with PicselControl_pan()</h3>
<table class="doxtable">
<tr>
<td rowspan="3">Parameter </td><td colspan="4">Effect of PicselControl_pan()   </td></tr>
<tr>
<td colspan="2">Moves view </td><td colspan="2">Moves document  </td></tr>
<tr>
<td>positive value </td><td>negative value </td><td>positive value </td><td>negative value  </td></tr>
<tr>
<td>x </td><td>LEFT </td><td>RIGHT </td><td>RIGHT </td><td>LEFT  </td></tr>
<tr>
<td>y </td><td>UP </td><td>DOWN </td><td>DOWN </td><td>UP  </td></tr>
</table>
<h3><a class="anchor" id="TgvPanning_key"></a>
Panning increments with key events</h3>
<table class="doxtable">
<tr>
<td rowspan="2">#define </td><td colspan="2">Key event moves view<sup>see note</sup> </td><td rowspan="2">default  </td></tr>
<tr>
<td>positive value </td><td>negative value  </td></tr>
<tr>
<td>PicselConfigFV_panUpAmount  </td><td>DOWN </td><td>UP </td><td>-32  </td></tr>
<tr>
<td>PicselConfigFV_panDownAmount  </td><td>UP </td><td>DOWN </td><td>32  </td></tr>
<tr>
<td>PicselConfigFV_panLeftAmount  </td><td>LEFT </td><td>RIGHT </td><td>32  </td></tr>
<tr>
<td>PicselConfigFV_panRightAmount  </td><td>RIGHT </td><td>LEFT </td><td>-32  </td></tr>
<tr>
<td>PicselConfigFV_panUpRepeatAmount  </td><td>DOWN </td><td>UP </td><td>-16  </td></tr>
<tr>
<td>PicselConfigFV_panDownRepeatAmount  </td><td>UP </td><td>DOWN </td><td>16  </td></tr>
<tr>
<td>PicselConfigFV_panLeftRepeatAmount  </td><td>LEFT </td><td>RIGHT </td><td>16  </td></tr>
<tr>
<td>PicselConfigFV_panRightRepeatAmount  </td><td>RIGHT </td><td>LEFT </td><td>-16  </td></tr>
</table>
<p>Note: The effects of key events on moving the document are reversed from those shown in the table. For example, moving the view LEFT/RIGHT for positive/negative values is equivalent to moving the document RIGHT/LEFT. <hr/>
 <h1><a class="anchor" id="TgvControl_State"></a>
Control state and display quality</h1>
<p><div class="dotgraph">
<img src="dot_control-state.png" alt="dot_control-state.png" border="0" usemap="#dot_control-state.map"/>
<map name="dot_control-state.map" id="dot_control-state.map"><area shape="rect" id="node3" href="" title="PicselControl_pan(...\nPicselControl_Start)" alt="" coords="172,99,324,143"/><area shape="rect" id="node4" href="" title="ENTWRX redraws screen\nat low quality" alt="" coords="169,193,327,237"/><area shape="rect" id="node6" href="" title="PicselControl_pan(...\nPicselControl_Continue)" alt="" coords="64,379,237,423"/><area shape="rect" id="node8" href="" title="PicselControl_pan(...\nPicselControl_End)" alt="" coords="305,379,457,423"/><area shape="rect" id="node9" href="" title="ENTWRX redraws screen\nat high quality" alt="" coords="303,473,460,517"/></map>
</div>
 Similarly for zoom gestures and PicselControl_zoom(). </p>
</div><!-- contents -->
<hr size="1"><address style="align: right;"><small>
<img src="securewrx-logo-small.png" align=right>
Copyright &copy; <a href="http://www.entwrx.com/">ENTWRX Ltd</a> 2014.
All rights reserved.
Generated on Thu Jul 2 2015 for File Viewer Development Kit trunk by
<a href="http://www.doxygen.org/">Doxygen</a>.</small></address>
<!-- Footer $Id: doxy-footer.html,v 1.4.10.1 2014/06/06 11:55:46 andrews Exp $ -->
</body>
</html>
